{"ast":null,"code":"import{Button,Card,CardBody,CardHeader,CardSubtitle,CardTitle,Col,Pagination,PaginationItem,PaginationLink,Row}from'reactstrap';import*as React from'react';import{useState}from'react';import Box from'@mui/material/Box';import Collapse from'@mui/material/Collapse';import IconButton from'@mui/material/IconButton';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableHead from'@mui/material/TableHead';import TableRow from'@mui/material/TableRow';import KeyboardArrowDownIcon from'@mui/icons-material/KeyboardArrowDown';import KeyboardArrowUpIcon from'@mui/icons-material/KeyboardArrowUp';import FilterBox from\"./Filter/FilterBox\";import Similar_Patients_Bar from\"./Similar_Patients_Bar\";import AdvancedFilter from\"./Filter/AdvancedFilter\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";let ownPatient={};function createData(patientData){let gender=\"F\";// Gender converten naar getallen\nif(patientData.gender===1){gender=\"M\";}let ownGender=\"F\";// Gender converten naar getallen\nif(ownPatient.gender===1){ownGender=\"M\";}return{info:[{\"age\":patientData.age,\"weight\":patientData.weight,\"gender\":gender,\"temperature\":patientData.temperature,\"heart_rate\":patientData.heart_rate,\"resp_rate\":patientData.resp_rate,\"spo2\":patientData.spo2,\"sbp\":patientData.sbp,\"dbp\":patientData.dbp,\"mbp\":patientData.mbp,\"wbc\":patientData.wbc,\"hemoglobin\":patientData.hemoglobin,\"platelet\":patientData.platelet,\"bun\":patientData.bun,\"cr\":patientData.cr,\"glu\":patientData.glu,\"Na\":patientData.Na,\"Cl\":patientData.Cl,\"K\":patientData.K,\"Mg\":patientData.Mg,\"Ca\":patientData.Ca,\"P\":patientData.P,\"inr\":patientData.inr,\"pt\":patientData.pt,\"ptt\":patientData.ptt,\"bicarbonate\":patientData.bicarbonate,\"aniongap\":patientData.aniongap,\"gcs\":patientData.gcs,\"vent\":patientData.vent,\"crrt\":patientData.crrt,\"vaso\":patientData.vaso,\"seda\":patientData.seda,\"sofa_score\":patientData.sofa_score,\"ami\":patientData.ami,\"ckd\":patientData.ckd,\"copd\":patientData.copd,\"hyperte\":patientData.hyperte,\"dm\":patientData.dm,\"aki\":patientData.aki,\"stroke\":patientData.stroke,\"AISAN\":patientData.AISAN,\"BLACK\":patientData.BLACK,\"HISPANIC\":patientData.HISPANIC,\"OTHER\":patientData.OTHER,\"WHITE\":patientData.WHITE,\"unknown\":patientData.unknown,\"CCU\":patientData.CCU,\"CVICU\":patientData.CVICU,\"MICU\":patientData.MICU,\"MICU/SICU\":patientData[\"MICU/SICU\"],\"NICU\":patientData.NICU,\"SICU\":patientData.SICU,\"TSICU\":patientData.TSICU},{\"age\":ownPatient.age,\"weight\":ownPatient.weight,\"gender\":ownGender,\"temperature\":ownPatient.temperature,\"heart_rate\":ownPatient.heart_rate,\"resp_rate\":ownPatient.resp_rate,\"spo2\":ownPatient.spo2,\"sbp\":ownPatient.sbp,\"dbp\":ownPatient.dbp,\"mbp\":ownPatient.mbp,\"wbc\":ownPatient.wbc,\"hemoglobin\":ownPatient.hemoglobin,\"platelet\":ownPatient.platelet,\"bun\":ownPatient.bun,\"cr\":ownPatient.cr,\"glu\":ownPatient.glu,\"Na\":ownPatient.Na,\"Cl\":ownPatient.Cl,\"K\":ownPatient.K,\"Mg\":ownPatient.Mg,\"Ca\":ownPatient.Ca,\"P\":ownPatient.P,\"inr\":ownPatient.inr,\"pt\":ownPatient.pt,\"ptt\":ownPatient.ptt,\"bicarbonate\":ownPatient.bicarbonate,\"aniongap\":ownPatient.aniongap,\"gcs\":ownPatient.gcs,\"vent\":ownPatient.vent,\"crrt\":ownPatient.crrt,\"vaso\":ownPatient.vaso,\"seda\":ownPatient.seda,\"sofa_score\":ownPatient.sofa_score,\"ami\":ownPatient.ami,\"ckd\":ownPatient.ckd,\"copd\":ownPatient.copd,\"hyperte\":ownPatient.hyperte,\"dm\":ownPatient.dm,\"aki\":ownPatient.aki,\"stroke\":ownPatient.stroke,\"AISAN\":ownPatient.AISAN,\"BLACK\":ownPatient.BLACK,\"HISPANIC\":ownPatient.HISPANIC,\"OTHER\":ownPatient.OTHER,\"WHITE\":ownPatient.WHITE,\"unknown\":ownPatient.unknown,\"CCU\":ownPatient.CCU,\"CVICU\":ownPatient.CVICU,\"MICU\":ownPatient.MICU,\"MICU/SICU\":ownPatient[\"MICU/SICU\"],\"NICU\":ownPatient.NICU,\"SICU\":ownPatient.SICU,\"TSICU\":ownPatient.TSICU}],veilig_ontslag:patientData.prediction,certaintyscore:patientData.certaintyscore};}function styleRow(row){//     make first letter uppercase\nrow=row.charAt(0).toUpperCase()+row.slice(1);// remove underscores\nrow=row.replace(/_/g,' ');return row;}function translatePrediction(prediction){if(Number(prediction)<0.5){return\"Nee\";}else if(Number(prediction)>=0.5){return\"Ja\";}else{return\"Unknown\";}}function Expanded_Row(details){const[open,setOpen]=React.useState(false);const row=createData(details.details);let titles=Object.keys(row.info[0]);for(let r in row.info[0]){if(r.value!==undefined){titles=Object.keys(r);}}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(TableRow,{sx:{'& > *':{borderBottom:'unset'}},children:[/*#__PURE__*/_jsx(TableCell,{align:\"right\",className:\"font-weight-bold\",children:translatePrediction(details.prediction)}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",className:\"font-weight-bold\",children:details.confidence}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"expand row\",size:\"small\",onClick:()=>setOpen(!open),children:open?/*#__PURE__*/_jsx(KeyboardArrowUpIcon,{}):/*#__PURE__*/_jsx(KeyboardArrowDownIcon,{})})})]}),/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:/*#__PURE__*/_jsx(Collapse,{in:open,timeout:\"auto\",unmountOnExit:true,children:/*#__PURE__*/_jsx(Box,{sx:{margin:1},children:/*#__PURE__*/_jsxs(Table,{size:\"small\",\"aria-label\":\"purchases\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{className:\"text-muted font-weight-bold\",children:\"Soortgelijke pati\\xEBnt\"}),/*#__PURE__*/_jsx(TableCell,{className:\"text-muted font-weight-bold\",children:\"Uw pati\\xEBnt\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:titles.map((infoRow,index)=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:\"text-muted font-weight-bold\",children:styleRow(infoRow)}),typeof row.info[0][infoRow]===\"number\"&&row.info[0][infoRow].toString().includes(\".\")?/*#__PURE__*/_jsx(TableCell,{children:row.info[0][infoRow].toFixed(2)}):/*#__PURE__*/_jsx(TableCell,{children:row.info[0][infoRow]}),typeof row.info[1][infoRow]===\"number\"&&row.info[1][infoRow].toString().includes(\".\")?/*#__PURE__*/_jsx(TableCell,{children:row.info[1][infoRow].toFixed(2)}):/*#__PURE__*/_jsx(TableCell,{children:row.info[1][infoRow]})]},index))})]})})})})})]});}function Similar_Patients_Table(data){console.log(\"Similar Patients Table\");let patients=data.similar_patients.patients;ownPatient=data.own_patient;const prediction=data.prediction;const predictions=data.similar_patients.predictions;const confidence=data.similar_patients.confidence;console.log(data.similar_patients);const[currentPage,setCurrentPage]=useState(0);const pageSize=10;// Change this to your desired page size\nconst pageCount=Math.ceil(patients.length/pageSize);const currentPatients=patients.slice(currentPage*pageSize,(currentPage+1)*pageSize);let count=0;for(let pred in predictions){if(predictions[pred]>=0.5){count+=1;}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(CardTitle,{className:\"text-dark text-2rem\",children:\"Soortgelijke pati\\xEBnten\"}),/*#__PURE__*/_jsx(CardSubtitle,{className:\"text-muted text-1rem\",children:\"Dit zijn pati\\xEBnten uit de trainingsdataset die het meest lijken op uw pati\\xEBnt\"})]}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(CardSubtitle,{className:\"sim-patients-table-header\",children:\"Percentage SAD\"}),/*#__PURE__*/_jsx(Similar_Patients_Bar,{method:\"hoeveelheidPatientenMetSAD\",prediction:prediction,aantalPatientenMetSAD:count,aantalPatienten:predictions.length}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Aantal similar patients met SAD: \",count,\" van de \",predictions.length,\" similar patients heeft SAD\"]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(TableContainer,{children:[/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"collapsible table\",children:[/*#__PURE__*/_jsx(TableHead,{className:\"sim-patients-table-head\",children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{className:\"sim-patients-table-header\",children:\"Heeft SAD?\"}),/*#__PURE__*/_jsx(TableCell,{className:\"text-muted font-weight-bold\",children:\"Certaintyscore\"}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsx(TableBody,{className:\"sim-patients-table-body\",children:currentPatients.map((data,index)=>/*#__PURE__*/// eslint-disable-next-line react/jsx-pascal-case\n_jsx(Expanded_Row,{details:data,prediction:predictions[index].toFixed(2),confidence:confidence[index].toFixed(2)},index))})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflow:'auto',maxHeight:'200px'},children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(PaginationItem,{disabled:currentPage<=0,children:/*#__PURE__*/_jsx(PaginationLink,{previous:true,onClick:()=>setCurrentPage(currentPage-1)})}),[...Array(pageCount)].map((page,i)=>/*#__PURE__*/_jsx(PaginationItem,{active:i===currentPage,children:/*#__PURE__*/_jsx(PaginationLink,{onClick:()=>setCurrentPage(i),children:i+1})},i)),/*#__PURE__*/_jsx(PaginationItem,{disabled:currentPage>=pageCount-1,children:/*#__PURE__*/_jsx(PaginationLink,{next:true,onClick:()=>setCurrentPage(currentPage+1)})})]})})]})})})]})]})});}export default Similar_Patients_Table;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}