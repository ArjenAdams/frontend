{"ast":null,"code":"import CounterfactualValues from\"../components/Counterfactual/CounterfactualValues\";import DashboardInfoCard from\"../components/InformationCards/DashboardInfoCard\";import React,{useEffect,useState}from\"react\";import{fetchCounterfactualData,fetchPatientData,fetchPredictionData,setCounterfactualData}from\"../handler/sessionStorageHandler\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Counterfactual(){const[counterfactuals,setCounterfactuals]=useState({});const[patient,setPatient]=useState({});const[prediction,setPrediction]=useState({});const[method,setMethod]=useState('GENETIC');const handleChangeMethod=event=>{setMethod(event.target.value);};const[hoeveelheid_counterfactuals,setHoeveelheid_counterfactuals]=useState(2);const handleChangeHoeveelheid=event=>{const value=event.target.value;// Optional: Additional validation to ensure the value is a number\nif(!isNaN(value)&&value!==''){setHoeveelheid_counterfactuals(parseInt(value));}};useEffect(()=>{const fetchData=async()=>{const patientData=await fetchPatientData();setPatient(patientData);const predictionData=await fetchPredictionData();setPrediction(predictionData);await getCounterfactuals(patientData);const counterfactualData=await fetchCounterfactualData();setCounterfactuals(counterfactualData);};fetchData();},[]);const cardInfo={\"Patient ID\":(patient===null||patient===void 0?void 0:patient.ID)||\"\",\"Prediction\":prediction.prediction||0,\"Probability\":prediction.confidence||0};const getCounterfactuals=async patientData=>{try{console.log(\"Fetching counterfactuals\");console.log(patientData);console.log(hoeveelheid_counterfactuals);console.log(method);let gender=0;console.log(patient);// Gender converten naar getallen\nif(patientData['gender'].value===\"M\"){gender=1;}const response=await fetch(\"http://localhost:5000/counterfactual\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"data\":{\"age\":patientData.age,\"weight\":patientData.weight,\"gender\":gender,\"temperature\":patientData.temperature,\"heart_rate\":patientData.heart_rate,\"resp_rate\":patientData.resp_rate,\"spo2\":patientData.spo2,\"sbp\":patientData.sbp,\"dbp\":patientData.dbp,\"mbp\":patientData.mbp,\"wbc\":patientData.wbc,\"hemoglobin\":patientData.hemoglobin,\"platelet\":patientData.platelet,\"bun\":patientData.bun,\"cr\":patientData.cr,\"glu\":patientData.glu,\"Na\":patientData.Na,\"Cl\":patientData.Cl,\"K\":patientData.K,\"Mg\":patientData.Mg,\"Ca\":patientData.Ca,\"P\":patientData.P,\"inr\":patientData.inr,\"pt\":patientData.pt,\"ptt\":patientData.ptt,\"bicarbonate\":patientData.bicarbonate,\"aniongap\":patientData.aniongap,\"gcs\":patientData.gcs,\"vent\":patientData.vent,\"crrt\":patientData.crrt,\"vaso\":patientData.vaso,\"seda\":patientData.seda,\"sofa_score\":patientData.sofa_score,\"ami\":patientData.ami,\"ckd\":patientData.ckd,\"copd\":patientData.copd,\"hyperte\":patientData.hyperte,\"dm\":patientData.dm,\"aki\":patientData.aki,\"stroke\":patientData.stroke,\"AISAN\":patientData.AISAN,\"BLACK\":patientData.BLACK,\"HISPANIC\":patientData.HISPANIC,\"OTHER\":patientData.OTHER,\"WHITE\":patientData.WHITE,\"unknown\":patientData.unknown,\"CCU\":patientData.CCU,\"CVICU\":patientData.CVICU,\"MICU\":patientData.MICU,\"MICU/SICU\":patientData[\"MICU/SICU\"],\"NICU\":patientData.NICU,\"SICU\":patientData.SICU,\"TSICU\":patientData.TSICU},\"method\":method,\"amount\":hoeveelheid_counterfactuals})});const counterfactuals=await response.json();if(response.status!==200){throw new Error(counterfactuals);}setCounterfactualData(counterfactuals);setCounterfactuals(counterfactuals);console.log(\"Counterfactuals:\");console.log(counterfactuals);return counterfactuals;}catch(Error){console.log(Error);window.alert(Error);}};async function getCounter(){try{let patientData=patient;console.log(\"Fetching counterfactuals\");console.log(patientData);console.log(hoeveelheid_counterfactuals);console.log(method);let gender=0;console.log(patient);// Gender converten naar getallen\nif(patientData['gender'].value===\"M\"){gender=1;}const response=await fetch(\"http://localhost:5000/counterfactual\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"data\":{\"age\":patientData.age,\"weight\":patientData.weight,\"gender\":gender,\"temperature\":patientData.temperature,\"heart_rate\":patientData.heart_rate,\"resp_rate\":patientData.resp_rate,\"spo2\":patientData.spo2,\"sbp\":patientData.sbp,\"dbp\":patientData.dbp,\"mbp\":patientData.mbp,\"wbc\":patientData.wbc,\"hemoglobin\":patientData.hemoglobin,\"platelet\":patientData.platelet,\"bun\":patientData.bun,\"cr\":patientData.cr,\"glu\":patientData.glu,\"Na\":patientData.Na,\"Cl\":patientData.Cl,\"K\":patientData.K,\"Mg\":patientData.Mg,\"Ca\":patientData.Ca,\"P\":patientData.P,\"inr\":patientData.inr,\"pt\":patientData.pt,\"ptt\":patientData.ptt,\"bicarbonate\":patientData.bicarbonate,\"aniongap\":patientData.aniongap,\"gcs\":patientData.gcs,\"vent\":patientData.vent,\"crrt\":patientData.crrt,\"vaso\":patientData.vaso,\"seda\":patientData.seda,\"sofa_score\":patientData.sofa_score,\"ami\":patientData.ami,\"ckd\":patientData.ckd,\"copd\":patientData.copd,\"hyperte\":patientData.hyperte,\"dm\":patientData.dm,\"aki\":patientData.aki,\"stroke\":patientData.stroke,\"AISAN\":patientData.AISAN,\"BLACK\":patientData.BLACK,\"HISPANIC\":patientData.HISPANIC,\"OTHER\":patientData.OTHER,\"WHITE\":patientData.WHITE,\"unknown\":patientData.unknown,\"CCU\":patientData.CCU,\"CVICU\":patientData.CVICU,\"MICU\":patientData.MICU,\"MICU/SICU\":patientData[\"MICU/SICU\"],\"NICU\":patientData.NICU,\"SICU\":patientData.SICU,\"TSICU\":patientData.TSICU},\"method\":method,\"amount\":hoeveelheid_counterfactuals})});const counterfactuals=await response.json();if(response.status!==200){throw new Error(counterfactuals);}setCounterfactualData(counterfactuals);setCounterfactuals(counterfactuals);console.log(\"Counterfactuals:\");console.log(counterfactuals);return counterfactuals;}catch(Error){console.log(Error);window.alert(Error);}}const handleSubmit=event=>{event.preventDefault();getCounter();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(DashboardInfoCard,{cardInformation:cardInfo}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type counterfactual:\"}),/*#__PURE__*/_jsxs(\"select\",{value:method,onChange:handleChangeMethod,children:[/*#__PURE__*/_jsx(\"option\",{value:\"RANDOM\",children:\"RANDOM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GENETIC\",children:\"GENETIC\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KDTREE\",children:\"KDTREE\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Aantal counterfactuals:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:hoeveelheid_counterfactuals,placeholder:\"Voer hier het aantal counterfactuals in!\",onChange:handleChangeHoeveelheid}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Submit\"})]}),patient.ID!==undefined&&counterfactuals!==undefined?/*#__PURE__*/_jsx(CounterfactualValues,{patient:patient,counterfactuals:counterfactuals,prediction:prediction}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading patient data...\"})]})});}export default Counterfactual;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}